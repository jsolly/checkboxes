---
import Alpine from "../../components/alpine/alpine.astro";
import CssOnly from "../../components/css-only/cssOnly.astro";
import Hyperscript from "../../components/hyperscript/hyperscript.astro";
import JQuery from "../../components/jquery/jquery.astro";
import ReactNestedCheckboxes from "../../components/react/ReactNestedCheckboxes";
import SvelteNestedCheckboxes from "../../components/svelte/SvelteNestedCheckboxes.svelte";
import Vanilla from "../../components/vanilla-js/vanilla.astro";
import VueNestedCheckboxes from "../../components/vue/VueNestedCheckboxes.vue";
import Layout from "../../layouts/Layout.astro";

export function getStaticPaths() {
	return [
		{ params: { framework: "vanilla-js" } },
		{ params: { framework: "alpine" } },
		{ params: { framework: "vue" } },
		{ params: { framework: "react" } },
		{ params: { framework: "svelte" } },
		{ params: { framework: "hyperscript" } },
		{ params: { framework: "css-only" } },
		{ params: { framework: "jquery" } },
	];
}

const { framework } = Astro.params;

type FrameworkId =
	| "vanilla-js"
	| "alpine"
	| "vue"
	| "react"
	| "svelte"
	| "hyperscript"
	| "css-only"
	| "jquery";

const components = {
	"vanilla-js": Vanilla,
	alpine: Alpine,
	vue: VueNestedCheckboxes,
	react: ReactNestedCheckboxes,
	svelte: SvelteNestedCheckboxes,
	hyperscript: Hyperscript,
	"css-only": CssOnly,
	jquery: JQuery,
} as const;

// Type guard to check if framework is valid
function isValidFramework(
	framework: string | undefined,
): framework is FrameworkId {
	return framework !== undefined && framework in components;
}

if (!isValidFramework(framework)) {
	return Astro.redirect("/404");
}

const Component = components[framework];
---

<Layout title={`${framework} Test Page`}>
	<div class="min-h-screen p-8">
		{(() => {
			switch(framework) {
				case "vue":
					return <VueNestedCheckboxes client:only="vue" />;
				case "react":
					return <ReactNestedCheckboxes client:only="react" />;
				case "svelte":
					return <SvelteNestedCheckboxes client:only="svelte" />;
				case "alpine":
				case "jquery":
				case "vanilla-js":
				case "hyperscript":
				case "css-only":
					return <Component />;
				default:
					return null;
			}
		})()}
	</div>
</Layout> 